(function(CMS,$){CMS.siteConfig={map:null,mapKey:'AIzaSyB8uoWbuhHNagbpi22tEeZYiT41toB171g',mapLatitude:$('#mapLat').val(),mapLongitude:$('#mapLong').val(),mapZoom:14,markerTitle:$('#mapTitle').val(),mapCanvasId:'map-canvas',GMapScriptURL:'http://maps.google.com/maps/api/js?sensor=false&key=',mapInit:function(){$.getScript(CMS.siteConfig.GMapScriptURL+CMS.siteConfig.mapKey+"&callback=CMS.siteConfig.showMap");},showMap:function(){var windowHeight=$(window).height();var mapLatlng=new google.maps.LatLng(CMS.siteConfig.mapLatitude,CMS.siteConfig.mapLongitude);var contentString='<h5>'+CMS.siteConfig.markerTitle+'</h5>';$('#'+CMS.siteConfig.mapCanvasId).css('height',(windowHeight/2)+'px');if($('#mapZoom').length>0){CMS.siteConfig.mapZoom=parseInt($('#mapZoom').val());}
var mapOptions={center:mapLatlng,mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:CMS.siteConfig.mapZoom};CMS.siteConfig.map=new google.maps.Map(document.getElementById(CMS.siteConfig.mapCanvasId),mapOptions);google.maps.event.addDomListener(window,"resize",function(){var newCenter=CMS.siteConfig.map.getCenter();google.maps.event.trigger(CMS.siteConfig.map,"resize");CMS.siteConfig.map.setCenter(newCenter);});$(document).on('opened','[data-reveal]',function(){var newCenter=CMS.siteConfig.map.getCenter();google.maps.event.trigger(CMS.siteConfig.map,"resize");CMS.siteConfig.map.setCenter(newCenter);});if(CMS.siteConfig.mapZoom==14){var marker=new google.maps.Marker({position:mapLatlng,map:CMS.siteConfig.map,title:CMS.siteConfig.markerTitle});var infowindow=new google.maps.InfoWindow({content:contentString});google.maps.event.addListener(marker,'click',function(){infowindow.open(CMS.siteConfig.map,marker);});}}},CMS.tgsUI={init:function(){$('.is-Bf').hide();$('.is-Meters').hide();CMS.tgsUI.filtersFormInit();},unitConvertDisplay:function(unit){switch(unit)
{case'knots':$('.is-Bf').fadeOut(0,function(){$('.is-Knots').fadeIn(200);});break;case'bf':$('.is-Knots').fadeOut(0,function(){$('.is-Bf').fadeIn(200);});break;case'meters':$('.is-Ft').fadeOut(0,function(){$('.is-Meters').fadeIn(200);});break;case'ft':$('.is-Meters').fadeOut(0,function(){$('.is-Ft').fadeIn(200);});break;default:}},filtersFormInit:function(){$('.displayActiveStatus').on('click',function(e){$(this).toggleClass('isActive');var accordioTriggers=$(this).closest('dl').find('a.displayActiveStatus').not(this);accordioTriggers.removeClass('isActive');});$('#resetFilters').change(function(){var checkboxes=$(this).closest('form').find(':checkbox').not(this);checkboxes.removeAttr('checked');});}},CMS.foundationConfig={init:function(){$(document).foundation({reveal:{animation:'fadeAndPop',animation_speed:350,close_on_background_click:true,dismiss_modal_class:'close-reveal-modal',bg_class:'reveal-modal-bg'},orbit:{animation:'fade',timer_speed:6000,pause_on_hover:true,resume_on_mouseout:false,animation_speed:900,stack_on_small:false,navigation_arrows:true,slide_number:false,bullets:false,timer:true,circular:true,swipe:true,variable_height:false},dropdown:{}});CMS.foundationConfig.ajaxSubmittedForm('#contactform','#contactFormBtn');},ajaxSubmittedForm:function(formId,formSubmitBtnId){var formElement=$(formId);var btnElement=$(formSubmitBtnId);if(formElement.length>0){btnElement.on('click',function(e){e.preventDefault();var formData=formElement.serializeArray();formData.push({name:"isAjax",value:"true"});var formAction=formElement.attr("action");$.post(formAction,formData,function(responce){$(".formError").remove();$(formId+" .error").removeClass('error');if(responce.hasErrors===false){formElement.trigger("reset");formElement.html('<p>'+responce.formMessage+'</p>');}
else{if(responce.errors!==null){var errorArray=responce.errors;$.each(errorArray,function(key,val){$(formId+'_'+key).addClass('error');$(formId+'_'+key).closest(".formFieldContainer").addClass('error');$(formId+'_'+key).closest(".formFieldContainer").after($('<small class="formError error">'+val[0]+'</small>').hide());});}
$('<small class="formError error">'+responce.formMessage+'</small>').hide().insertAfter(btnElement);$('.formError').fadeIn(200);}});});}}};$(function(){CMS.foundationConfig.init();CMS.tgsUI.init();if($('#mapModal').length>0){CMS.siteConfig.mapInit();}});})(window.CMS=window.CMS||{},jQuery);