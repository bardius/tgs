{#

This file is part of the BardisCMS.

(c) George Bardis <george@bardis.info>

#}


{% block file_widget %}
    {{ block('field_widget') }}
    {% if form.parent.vars.value.id is defined %}
        {% if form.parent.vars.value.providerName == 'sonata.media.provider.image' %}
            <div class="mediaPreviewHolder">
                <h4>Existing Image</h4>
                <p class="imagePreview">
                    Preview image: <a class="imageLink" href="{% path form.parent.vars.value.id, 'big' %}" target="_blank">{% thumbnail form.parent.vars.value.id, 'small' %}</a>
                </p>
            </div>
        {% endif %}
        {% if form.parent.vars.value.providerName == 'sonata.media.provider.file' %}
            <div class="mediaPreviewHolder">
                <h4>Existing Attachment File</h4>
                <p class="filePreview">
                    Preview file: <a class="fileLink" href="{{ path('sonata_media_download', {'id': form.parent.vars.value.id}) }}" target="_blank">{{ form.parent.vars.value.name }}</a>
                </p>
            </div>
        {% endif %}
    {% endif %}
{% endblock file_widget %}


{% block text_widget %}
    {{ block('field_widget') }}
    {% if form.parent.vars.value.id is defined and form.parent.vars.value.providerName is defined %}
        {% if form.parent.vars.value.providerName == 'sonata.media.provider.youtube' %}
            <div class="mediaPreviewHolder">
                <h4>Existing Video</h4>
                <p class="videoPreview">
                    Preview video: {% media form.parent.vars.value.id, 'big' %}</a>
                </p>
            </div>
        {% endif %}
        {% if form.parent.vars.value.providerName == 'sonata.media.provider.vimeo' %}
            <div class="mediaPreviewHolder">
                <h4>Existing Video</h4>
                <p class="videoPreview">
                    Preview video: {% media form.parent.vars.value.id, 'big' %}</a>
                </p>
            </div>
        {% endif %}
    {% endif %}
{% endblock text_widget %}



{% block form_row %}
{% spaceless %}
    <div class="control-group">
        {{ form_label(form) }}
        <div class="controls sonata-ba-field sonata-ba-field-standard-natural">
            {{ form_errors(form) }}
            {{ form_widget(form) }}
        </div>
    </div>
{% endspaceless %}
{% endblock form_row %}


{% block contentblockcollection_widget_row %}
{% spaceless %}
	<fieldset id="block_{{ child.ordering.vars.value }}" class="sonata-ba-fielset-collapsed ui-state-default" style="float: left;padding: 10px;margin: 10px 0; background-color: #EEE; border: 1px solid #666;clear: left;">
		<legend style="margin: 0;">
			<a title="expand/collapse" class="sonata-ba-collapsed" href="">
				Content Block: {{ child.title.vars.value }}
			</a>
		</legend>
		<div class="sonata-collection-row sonata-ba-collapsed-fields" style="float: left;padding: 10px;margin: 10px 0; background-color: #EEE; border: 1px solid #666;">
			<span style="display: none;">{{ form_label(child) }}</span>
			{% if allow_delete %}
				<span class="btn sonata-action-element" style="float: left;display: block; clear: both;">
					<a href="#" style="float: left;display: block;width: auto;text-align: center;line-height: 28px;background-position: 0 50%;padding-left: 20px;" class="sonata-collection-delete">Delete This Content Block</a>    
				</span>
			{% endif %}
			{{ form_errors(child, { 'attr': {'style': 'float:left;width:100%;padding:10px 0;width:100%;'} }) }}
			{{ form_widget(child, { 'attr': {'style': 'float:left;width:100%;padding:10px 0;width:100%;' ,'class': 'sonata-ba-collapsed-fields'} }) }}     
		</div>
	</fieldset>
{% endspaceless %}
{% endblock contentblockcollection_widget_row %}


{% block contentblockcollection_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set child = prototype %}
        {% set attr = attr|merge({'data-prototype': block('contentblockcollection_widget_row') }) %}
    {% endif %}
    <div style="float:left;" {{ block('widget_container_attributes') }}>
        {{ form_errors(form) }}	
        {% for child in form.children|sort_by_attribute('form.ordering')  %}
            {{ block('contentblockcollection_widget_row') }}
        {% endfor %}
        {{ form_rest(form) }}
        {% if allow_add %}
            <span class="btn sonata-action-element" style="float: left;display: block; clear: both;">
                <a href="#" style="float: left;display: block;width: auto;text-align: center;line-height: 28px;background-position: 0 50%;padding-left: 20px;" class="sonata-collection-add">Add New Content Block</a> 
            </span>
        {% endif %}
    </div>
{% endspaceless %}

{% endblock contentblockcollection_widget %}


{% block contentimagecollection_widget_row %}
{% spaceless %}
	<fieldset id="image_{{ child.imageOrder.vars.value }}" class="sonata-ba-fielset-collapsed ui-state-default" style="float: left;padding: 10px;margin: 10px 0; background-color: #EEE; border: 1px solid #666;clear: left;">
		<legend style="margin: 0;">
			<a title="expand/collapse" class="sonata-ba-collapsed" href="">
                            Image File {{ child.imageOrder.vars.value }}
			</a>
		</legend>
		<div class="sonata-collection-row sonata-ba-collapsed-fields" style="float: left;padding: 10px;margin: 10px 0; background-color: #EEE; border: 1px solid #666;">
			<span style="display: none;">{{ form_label(child) }}</span>
			{% if allow_delete %}
				<span class="btn sonata-action-element" style="float: left;display: block; clear: both;">
					<a href="#" style="float: left;display: block;width: auto;text-align: center;line-height: 28px;background-position: 0 50%;padding-left: 20px;" class="sonata-collection-delete">Delete This Image File</a>
				</span>
			{% endif %}
			{{ form_errors(child, { 'attr': {'style': 'float:left;width:100%;padding:10px 0;width:100%;'} }) }}
			{{ form_widget(child, { 'attr': {'style': 'float:left;width:100%;padding:10px 0;width:100%;' ,'class': 'sonata-ba-collapsed-fields'} }) }}     
		</div>
	</fieldset>
{% endspaceless %}
{% endblock contentimagecollection_widget_row %}


{% block contentimagecollection_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set child = prototype %}
        {% set attr = attr|merge({'data-prototype': block('contentimagecollection_widget_row') }) %}
    {% endif %}
    <div style="float:left;" {{ block('widget_container_attributes') }}>
        {{ form_errors(form) }}	
        {% for child in form.children|sort_by_attribute('form.imageOrder')  %}
            {{ block('contentimagecollection_widget_row') }}
        {% endfor %}
        {{ form_rest(form) }}
        {% if allow_add %}
            <span class="btn sonata-action-element" style="float: left;display: block; clear: both;">
                <a href="#" style="float: left;display: block;width: auto;text-align: center;line-height: 28px;background-position: 0 50%;padding-left: 20px;" class="sonata-collection-add">Add New Image File</a> 
            </span>
        {% endif %}
    </div>
{% endspaceless %}

{% endblock contentimagecollection_widget %}